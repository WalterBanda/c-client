# Workflow that sets up project, install flutter sdk and installs project dependacies

name: Project Setup
description: Clone's project, setup flutter sdk with locked version, installs project dependacies
inputs:
  flutter_version:
    description: Version that would install locked flutter sdk
    required: false
    default: 3.7.3
runs:
  using: composite
  steps:
    - name: Setup Flutter SDK
      uses: subosito/flutter-action@v2
      with:
        channel: "stable"
        flutter-version: ${{ inputs.flutter_version }}
        cache: true
        cache-key: "flutter-:os:-:channel:-:version:-:arch:-:hash:" # optional, change this to force refresh cache
        cache-path: "${{ runner.tool_cache }}/flutter/:channel:-:version:-:arch:" # optional, change this to specify the cache path
        architecture: x64 # optional, x64 or arm64

    - name: Install project dependacies
      run: flutter pub get
      shell: bash
    - name: Caching build binaries
      run: flutter precache
      shell: bash
